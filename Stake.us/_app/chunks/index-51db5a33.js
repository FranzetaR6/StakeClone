var L=Object.defineProperty,j=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var l=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var f=(o,i,a)=>i in o?L(o,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[i]=a,u=(o,i)=>{for(var a in i||(i={}))D.call(i,a)&&f(o,a,i[a]);if(l)for(var a of l(i))_.call(i,a)&&f(o,a,i[a]);return o},B=(o,i)=>j(o,C(i));import{ar as g,C as r,R as c}from"./vendor-202ba1b8.js";import{a9 as q,i as w}from"./index-239f6385.js";import{M as p}from"./MyBetList.generated-201c3b97.js";import{b as x}from"./index-739d4422.js";import{r as M}from"./requestClient-501ba30b.js";const $=(()=>{const o=r([]),i=r([]),a=r([]),v=g([i,o],([e,s])=>e.filter(n=>s.includes(n.id)===!1)),d=e=>{e.bet.__typename!=="SportBet"&&x.addStat(q(e)),i.update(s=>s.some(t=>t.id===e.id)?s:[e,...s].slice(0,50))},m=e=>{const s=c(o),n=s.find(t=>t.id===e);o.set(s.filter(t=>t.id!==e)),n?(d(n),a.set(c(a).filter(t=>t!==e))):a.update(t=>[...t,e])},b=e=>{const s=c(a).includes(e.id);o.update(n=>[...n,e]),s&&m(e.id)},y=async e=>{var s,n;if(e.session.locale&&!!e.session.session)try{const t=await M({doc:p,variables:{limit:50},load:e});return((s=t==null?void 0:t.data)==null?void 0:s.user)&&i.set((n=t==null?void 0:t.data)==null?void 0:n.user.houseBetList),t==null?void 0:t.data}catch{return null}else Promise.resolve()},h=async()=>{var n,t;const s=await w().query(p,{limit:50}).toPromise();((n=s==null?void 0:s.data)==null?void 0:n.user)&&i.set((t=s==null?void 0:s.data)==null?void 0:t.user.houseBetList)};return B(u({},v),{rawBetList:i,addActiveBet:b,removeActiveBet:m,addBetToRawBetList:d,load:y,init:h})})();export{$ as m};
