var m=Object.defineProperty,b=Object.defineProperties;var g=Object.getOwnPropertyDescriptors;var i=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var c=(r,e,o)=>e in r?m(r,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[e]=o,n=(r,e)=>{for(var o in e||(e={}))y.call(e,o)&&c(r,o,e[o]);if(i)for(var o of i(e))h.call(e,o)&&c(r,o,e[o]);return r},l=(r,e)=>b(r,g(e));import{C as v,R as F}from"./vendor-202ba1b8.js";import{r as s}from"./requestClient-501ba30b.js";function k(r){return async({cache:e,combine:o,load:d,variables:a})=>{r.store.update(t=>l(n({},t),{error:null,loading:!0}));try{const t=await s({doc:r.document,variables:n(n({},r.previousVariables),a),load:d,cache:e});let u=o(F(r.store).data,t==null?void 0:t.data);return r.store.update(p=>l(n({},p),{error:null,data:u})),u}catch{return null}finally{r.store.update(t=>l(n({},t),{loading:!1}))}}}function w(r){return async(e,o,d)=>{r.store.update(a=>l(n({},a),{error:null,loading:!0}));try{const a=await s({doc:r.document,variables:o,load:e,cache:d});r.previousVariables=o;let t=a==null?void 0:a.data;return r.store.update(u=>l(n({},u),{error:null,data:t})),t}catch(a){return r.store.update(t=>l(n({},t),{error:a})),null}finally{r.store.update(a=>l(n({},a),{loading:!1}))}}}function q(r){const e=v({loading:!1,error:null,data:null}),o={store:e,document:r,previousVariables:{}},d=k(o),a=w(o);return l(n({},e),{loadMore:d,fetch:a})}export{q as m};
