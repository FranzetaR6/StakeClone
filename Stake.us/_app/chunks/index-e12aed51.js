import{S as q,i as B,s as W,e as w,j as M,c as E,a as T,m as A,d as v,b as h,$ as g,a0 as k,f as S,a1 as z,o as G,a3 as U,p as X,q as Y,aC as J,x as F,u as I,v as K,t as L,g as N,h as Q,k as Z,n as x,r as $,a8 as ee,a9 as te,w as ae,B as ne}from"./vendor-202ba1b8.js";import{W as C,H as D,P as ie}from"./index-6b0c88c0.js";const se=a=>{const e=getComputedStyle(a),t=e.transform||e.webkitTransform;let s=t.match(/^matrix3d\((.+)\)$/);return s?parseFloat(s[1].split(", ")[13]):(s=t.match(/^matrix\((.+)\)$/),[s?parseFloat(s[1].split(", ")[4]):0,s?parseFloat(s[1].split(", ")[5]):0])},le=(a,{element:e,transform:t})=>{let s=0,i=0;if(t){const o=a.getBoundingClientRect(),c=e.getBoundingClientRect(),[d,_]=se(a);s=c.left-o.left+d,i=c.top-o.top+_}a.style.transform=`translate(${s}px, ${i}px)`},O=(a,e)=>{a.style.transition=`transform ${e.duration}ms`},re=(a,e)=>{const t=async i=>{O(a,i),le(a,i)};return(async i=>{i.transform&&(a.style.transition="transform 0ms",a.style.opacity="0"),window.requestAnimationFrame(()=>{a.style.opacity="",O(a,i)})})(e),t(e),{update:i=>{t(i)}}};function j(a,e,t){const s=a.slice();return s[15]=e[t],s[17]=t,s}function P(a,e){let t,s,i,o,c,d,_,m;const n=[e[15],{status:e[3]},{animationOn:e[5]}];let l={};for(let r=0;r<n.length;r+=1)l=ne(l,n[r]);return i=new ie({props:l}),{key:a,first:null,c(){t=w("div"),s=w("div"),M(i.$$.fragment),this.h()},l(r){t=E(r,"DIV",{class:!0,"data-test":!0,style:!0});var u=T(t);s=E(u,"DIV",{});var y=T(s);A(i.$$.fragment,y),y.forEach(v),u.forEach(v),this.h()},h(){h(t,"class","content svelte-1uo2ac4"),h(t,"data-test",o=`card-${e[17]+1}`),g(t,"margin-top",1*e[17]+"em"),g(t,"margin-left","-"+(e[17]>0?C/2:0)+"em"),g(t,"animation-delay",(e[5]?e[17]*100:0)+"ms"),g(t,"--muck-transition",e[6]+"ms"),k(t,"dealt",e[15].dealt),k(t,"mucked",e[15].mucked),this.first=t},m(r,u){S(r,t,u),z(t,s),G(i,s,null),d=!0,_||(m=U(c=re.call(null,t,{transform:!e[15].dealt,element:e[2],duration:e[7]})),_=!0)},p(r,u){e=r;const y=u&41?X(n,[u&1&&Y(e[15]),u&8&&{status:e[3]},u&32&&{animationOn:e[5]}]):{};i.$set(y),(!d||u&1&&o!==(o=`card-${e[17]+1}`))&&h(t,"data-test",o),(!d||u&1)&&g(t,"margin-top",1*e[17]+"em"),(!d||u&1)&&g(t,"margin-left","-"+(e[17]>0?C/2:0)+"em"),(!d||u&33)&&g(t,"animation-delay",(e[5]?e[17]*100:0)+"ms"),(!d||u&64)&&g(t,"--muck-transition",e[6]+"ms"),c&&J(c.update)&&u&133&&c.update.call(null,{transform:!e[15].dealt,element:e[2],duration:e[7]}),u&1&&k(t,"dealt",e[15].dealt),u&1&&k(t,"mucked",e[15].mucked)},i(r){d||(F(i.$$.fragment,r),d=!0)},o(r){I(i.$$.fragment,r),d=!1},d(r){r&&v(t),K(i),_=!1,m()}}}function V(a){let e,t,s;return{c(){e=w("div"),t=L(a[1]),this.h()},l(i){e=E(i,"DIV",{class:!0});var o=T(e);t=N(o,a[1]),o.forEach(v),this.h()},h(){h(e,"class",s="value "+a[3]+" svelte-1uo2ac4"),k(e,"hide",a[11]===0)},m(i,o){S(i,e,o),z(e,t)},p(i,o){o&2&&Q(t,i[1]),o&8&&s!==(s="value "+i[3]+" svelte-1uo2ac4")&&h(e,"class",s),o&2056&&k(e,"hide",i[11]===0)},d(i){i&&v(e)}}}function oe(a){let e,t=[],s=new Map,i,o,c,d=a[0];const _=n=>n[15]&&"key"in n[15]?n[15].key:n[17];for(let n=0;n<d.length;n+=1){let l=j(a,d,n),r=_(l);s.set(r,t[n]=P(r,l))}let m=(typeof a[1]=="string"&&a[1]||typeof a[1]=="number")&&V(a);return{c(){e=w("div");for(let n=0;n<t.length;n+=1)t[n].c();i=Z(),m&&m.c(),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0});var l=T(e);for(let r=0;r<t.length;r+=1)t[r].l(l);i=x(l),m&&m.l(l),l.forEach(v),this.h()},h(){h(e,"class","wrap svelte-1uo2ac4"),h(e,"style",o="--card-size-ratio: "+a[4]+"em; --slide-transition: "+a[7]+"ms; "+a[10]+"; --min-height: "+a[8]+"em; --min-width: "+a[9]+"em")},m(n,l){S(n,e,l);for(let r=0;r<t.length;r+=1)t[r].m(e,null);z(e,i),m&&m.m(e,null),c=!0},p(n,[l]){l&237&&(d=n[0],$(),t=ee(t,l,_,1,n,d,s,e,te,P,i,j),ae()),typeof n[1]=="string"&&n[1]||typeof n[1]=="number"?m?m.p(n,l):(m=V(n),m.c(),m.m(e,null)):m&&(m.d(1),m=null),(!c||l&1936&&o!==(o="--card-size-ratio: "+n[4]+"em; --slide-transition: "+n[7]+"ms; "+n[10]+"; --min-height: "+n[8]+"em; --min-width: "+n[9]+"em"))&&h(e,"style",o)},i(n){if(!c){for(let l=0;l<d.length;l+=1)F(t[l]);c=!0}},o(n){for(let l=0;l<t.length;l+=1)I(t[l]);c=!1},d(n){n&&v(e);for(let l=0;l<t.length;l+=1)t[l].d();m&&m.d()}}}function me(a,e,t){let s,i,o,c,d,_,m,{cards:n}=e,{value:l=void 0}=e,{destinationElement:r}=e,{status:u="none"}=e,{cardSizeRatio:y=1}=e,{minCards:p=2}=e,{transition:H=300}=e,{animationOn:b=!0}=e;return a.$$set=f=>{"cards"in f&&t(0,n=f.cards),"value"in f&&t(1,l=f.value),"destinationElement"in f&&t(2,r=f.destinationElement),"status"in f&&t(3,u=f.status),"cardSizeRatio"in f&&t(4,y=f.cardSizeRatio),"minCards"in f&&t(12,p=f.minCards),"transition"in f&&t(13,H=f.transition),"animationOn"in f&&t(5,b=f.animationOn)},a.$$.update=()=>{a.$$.dirty&1&&t(14,s=n.filter(f=>{var{dealt:R}=f;return R}).length),a.$$.dirty&1&&t(11,i=n.filter(f=>{var{mucked:R}=f;return!R}).length),a.$$.dirty&16384&&t(10,o=s===0?"":"width: "+((s-1)*(C/2)+C).toFixed(2)+"em; height: "+(s-1*1+D).toFixed(2)+"em"),a.$$.dirty&4096&&t(9,c=(p-1)*C/2+C),a.$$.dirty&4096&&t(8,d=p-1*1+D),a.$$.dirty&8224&&t(7,_=b?H:0),a.$$.dirty&32&&t(6,m=b?300:0)},[n,l,r,u,y,b,m,_,d,c,o,i,p,H,s]}class fe extends q{constructor(e){super();B(this,e,me,oe,W,{cards:0,value:1,destinationElement:2,status:3,cardSizeRatio:4,minCards:12,transition:13,animationOn:5})}}export{fe as P};
