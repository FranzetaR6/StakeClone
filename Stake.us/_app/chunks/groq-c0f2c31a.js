var E=Object.defineProperty;var f=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var h=(e,r,t)=>r in e?E(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,m=(e,r)=>{for(var t in r||(r={}))q.call(r,t)&&h(e,t,r[t]);if(f)for(var t of f(r))O.call(r,t)&&h(e,t,r[t]);return e};import{C as p,be as T}from"./vendor-202ba1b8.js";import{D as $}from"./index-78395626.js";const C="tdrhge4k",R=$,S="v2021-06-07",j=`https://${C}.apicdn.sanity.io/${S}/data/query/${R}`;function D(e){return new Promise(async(r,t)=>{let n,a=await e();clearTimeout(n),r(a)})}function P(e){return()=>{const r=Array(e).join(""),t=p(null),n=p(!1),a=p(null);async function A({fetch:y,session:d},c){return await D(async()=>{n.set(!0);try{const i=T({query:r,params:m({lang:d.locale},c)}),l=`${j}${i}`,o=await y(l,{method:"GET",headers:{"Access-Control-Allow-Origin":!0,"Content-Type":"application/json"}}),s=await o.json();if("error"in s)throw s.error;if(o.status!==200){const w=new Error("Sanity GROQ query returned an error");throw w.data=s,w}const u=s.result;return t.set(u),u}catch(i){return a.set(i),null}finally{n.set(!1)}})}async function g(y,d){n.set(!0);try{const c=T({query:r,params:d}),i=`${j}${c}`,l=await y(i,{method:"GET",headers:{"Access-Control-Allow-Origin":!0,"Content-Type":"application/json"}}),o=await l.json();if("error"in o)throw o.error;if(l.status!==200){const u=new Error("Sanity GROQ query returned an error");throw u.data=o,u}const s=o.result;return t.set(s),s}catch(c){a.set(c)}finally{n.set(!1)}}return{load:A,data:t,loading:n,error:a,query:g}}}export{P as g};
